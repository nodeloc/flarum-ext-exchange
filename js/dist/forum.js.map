{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@nodeloc/flarum-ext-exchange/webpack/bootstrap","webpack://@nodeloc/flarum-ext-exchange/webpack/runtime/compat get default export","webpack://@nodeloc/flarum-ext-exchange/webpack/runtime/define property getters","webpack://@nodeloc/flarum-ext-exchange/webpack/runtime/hasOwnProperty shorthand","webpack://@nodeloc/flarum-ext-exchange/webpack/runtime/make namespace object","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['forum/app']\"","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['common/extend']\"","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['forum/components/UserPage']\"","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@nodeloc/flarum-ext-exchange/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@nodeloc/flarum-ext-exchange/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['Component']\"","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['app']\"","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['components/Button']\"","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['components/Link']\"","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['helpers/avatar']\"","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['helpers/username']\"","webpack://@nodeloc/flarum-ext-exchange/./src/forum/components/ExchangeHistoryListItem.js","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['common/components/Button']\"","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['common/components/Alert']\"","webpack://@nodeloc/flarum-ext-exchange/./src/forum/components/CreateExchange.js","webpack://@nodeloc/flarum-ext-exchange/./src/forum/components/Withdraw.js","webpack://@nodeloc/flarum-ext-exchange/./src/forum/components/ExchangeHistoryList.js","webpack://@nodeloc/flarum-ext-exchange/./src/forum/components/ExchangeHistoryPage.js","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['common/Model']\"","webpack://@nodeloc/flarum-ext-exchange/./src/forum/models/UserExchangeHistory.js","webpack://@nodeloc/flarum-ext-exchange/./src/forum/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UserPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['helpers/avatar'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['helpers/username'];","import Component from \"flarum/Component\";\nimport Link from \"flarum/components/Link\";\nimport avatar from \"flarum/helpers/avatar\";\nimport username from \"flarum/helpers/username\";\n\nexport default class ExchangeListItem extends Component {\n  view() {\n    const { userExchangeHistory } = this.attrs;\n    const created_at = userExchangeHistory.created_at();\n    const money = userExchangeHistory.money();\n    const type = userExchangeHistory.type();\n    const tx_hash = userExchangeHistory.tx_hash();\n    return (\n      <tr>\n        <td style=\"padding: 8px; border-bottom: 1px solid #ddd;\">{created_at}</td>\n        <td style=\"padding: 8px; border-bottom: 1px solid #ddd;\">{type === 0 ? \"能量转积分\" : \"能量提现\"}</td>\n        <td style=\"padding: 8px; border-bottom: 1px solid #ddd;\">{money}</td>\n        <td style=\"padding: 8px; border-bottom: 1px solid #ddd;\">\n          <a href={`https://www.oklink.com/zh-hans/polygon/tx/${tx_hash}`} target=\"_blank\">\n            {tx_hash}\n          </a>\n        </td>\n      </tr>\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Alert'];","import app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport Stream from 'flarum/common/utils/Stream';\nimport Alert from 'flarum/common/components/Alert';\n\nexport default class CreateExchange extends Modal {\n  constructor() {\n    super();\n    this.exchange_rate = app.forum.attribute('exchange_rate');\n    this.credits = Stream('0');\n    this.loading = false;\n  }\n\n  className() {\n    return 'create-exchange Modal--small';\n  }\n\n  title() {\n    return app.translator.trans('nodeloc-exchange.forum.create_exchange');\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n    this.loading = true;\n\n    app.request({\n      method: 'POST',\n      url: app.forum.attribute('apiUrl') + '/exchange',\n      body: {\n        credits: this.credits(),\n      },\n    }).then((result) => {\n      this.loading = false;\n      if (result.error) {\n        app.alerts.show(\n          {\n            type: 'error',\n          },\n          result.error\n        );\n        return;\n      }\n      app.alerts.show(Alert, { type: 'success' }, \"能量转换成功!\");\n      // Close the purchase box\n      this.hide();\n    });\n  }\n  onhide() {\n    super.onhide();\n    m.redraw();\n  }\n  content() {\n    return (\n      <div className=\"container buy-store-layer\">\n        <div className=\"Form\">\n          <div className=\"Form-group\">\n            <label\n              for=\"buy-store-to-mail\">{app.translator.trans('nodeloc-exchange.forum.input_help')}</label>\n            <div\n              className=\"helpText\">{app.translator.trans('nodeloc-exchange.forum.exchange_rate', {exchange_rate: this.exchange_rate})} </div>\n            <input\n              required\n              id=\"buy-store-to-mail\"\n              className=\"FormControl\"\n              type=\"number\"\n              bidi={this.credits}\n            />\n          </div>\n          <Button\n            className=\"Button Button--primary\"\n            type=\"submit\"\n            loading={this.loading}\n            onclick={(e) => this.onsubmit(e)}\n          >\n            转换\n          </Button>\n        </div>\n      </div>\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport Stream from 'flarum/common/utils/Stream';\nimport Alert from 'flarum/common/components/Alert';\n\nexport default class WithDraw extends Modal {\n  constructor() {\n    super();\n    this.exchange_rate = app.forum.attribute('exchange_rate');\n    this.credits = Stream('0');\n    this.withdraw_address = Stream('');\n    this.loading = false;\n  }\n\n  className() {\n    return 'create-exchange Modal--small';\n  }\n\n  title() {\n    return app.translator.trans('nodeloc-exchange.forum.withdraw');\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n    this.loading = true;\n\n    app.request({\n      method: 'POST',\n      url: app.forum.attribute('apiUrl') + '/withdraw',\n      body: {\n        withdraw_address: this.withdraw_address(),\n        credits: this.credits(),\n      },\n    }).then((result) => {\n      this.loading = false;\n      if (result.error) {\n        app.alerts.show(\n          {\n            type: 'error',\n          },\n          result.error\n        );\n        return;\n      }\n      app.alerts.show(Alert, { type: 'success' }, \"提现成功!\");\n      // Close the purchase box\n      this.hide();\n    });\n  }\n  onhide() {\n    super.onhide();\n    m.redraw();\n  }\n  content() {\n    return (\n      <div className=\"container buy-store-layer\">\n        <div className=\"Form\">\n          <div className=\"Form-group\">\n            <label\n              for=\"withdraw\">{app.translator.trans('nodeloc-exchange.forum.withdraw_address')}</label>\n            <input\n              required\n              id=\"withdraw\"\n              className=\"FormControl\"\n              type=\"text\"\n              bidi={this.withdraw_address}\n            />\n            <label\n              for=\"withdraw\">{app.translator.trans('nodeloc-exchange.forum.withdraw_amount')}</label>\n            <input\n              required\n              id=\"withdraw\"\n              className=\"FormControl\"\n              type=\"number\"\n              bidi={this.credits}\n            />\n          </div>\n          <Button\n            className=\"Button Button--primary\"\n            type=\"submit\"\n            loading={this.loading}\n            onclick={(e) => this.onsubmit(e)}\n          >\n            {app.translator.trans('nodeloc-exchange.forum.withdraw')}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n}\n","import Component from \"flarum/Component\";\nimport app from \"flarum/app\";\nimport LoadingIndicator from \"flarum/components/LoadingIndicator\";\nimport Button from \"flarum/components/Button\";\n\nimport ExchangeListItem from \"./ExchangeHistoryListItem\";\nimport CreateExchange from \"./CreateExchange\"\nimport WithDraw from \"./Withdraw\"\nimport Deposit from \"./Deposit\"\nexport default class ExchangeList extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.loading = true;\n    this.moreResults = false;\n    this.userExchangeHistory = [];\n    this.user = this.attrs.params.user;\n    this.loadResults();\n  }\n\n  view() {\n    let loading;\n\n    if (this.loading) {\n      loading = LoadingIndicator.component({ size: \"large\" });\n    }\n\n    return (\n      <div>\n        <div style=\"padding-bottom:10px; font-size: 24px;font-weight: bold;\">\n          {app.translator.trans(\"nodeloc-exchange.forum.title\")}\n\n        </div>\n        <Button\n          class=\"Button Button--primary\"\n          style=\"margin-right:10px;\"\n          onclick={() => {\n            app.modal.show(WithDraw, {\n              onhide: () => {\n                m.route.set(m.route.get());\n              }\n            });\n          }}\n        >\n          {app.translator.trans('nodeloc-exchange.forum.withdraw')}\n        </Button>\n{/*\n       <Button\n          class=\"Button Button--primary\"\n          style=\"margin-right:10px;\"\n          onclick={() => {\n            app.modal.show(Deposit, {\n              onhide: () => {\n                m.route.set(m.route.get());\n              }\n            });\n          }}\n        >\n          {app.translator.trans('nodeloc-exchange.forum.deposit')}\n        </Button> */}\n\n        <Button\n          class=\"Button Button--primary\"\n          onclick={() => {\n            app.modal.show(CreateExchange, {\n              onhide: () => {\n                m.route.set(m.route.get());\n              }\n            });\n          }}\n        >\n          {app.translator.trans('nodeloc-exchange.forum.create_exchange')}\n        </Button>\n        <ul style=\"margin: 0;padding: 0;list-style-type: none;position: relative;\">\n        <table style=\"width: 100%; border-collapse: collapse; text-align: left;\">\n                    <thead>\n                      <tr>\n                        <th style=\"padding: 8px; border-bottom: 1px solid #ddd;\">{app.translator.trans('nodeloc-exchange.forum.record.date')}</th>\n                        <th style=\"padding: 8px; border-bottom: 1px solid #ddd;\">{app.translator.trans('nodeloc-exchange.forum.record.type')}</th>\n                        <th style=\"padding: 8px; border-bottom: 1px solid #ddd;\">{app.translator.trans('nodeloc-exchange.forum.record.money-out')}</th>\n                        <th style=\"padding: 8px; border-bottom: 1px solid #ddd;\">{app.translator.trans('nodeloc-exchange.forum.record.tx-link')}</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                    {this.userExchangeHistory.map((userExchangeHistory) => {\n                      return (\n                        <>\n                          {ExchangeListItem.component({ userExchangeHistory })}\n                        </>\n                      );\n                    })}\n                    </tbody>\n          </table>\n        </ul>\n\n        {!this.loading && this.userExchangeHistory.length===0 && (\n          <div>\n            <div style=\"font-size:1.4em;color: var(--muted-more-color);text-align: center;height: 300px;line-height: 100px;\">{app.translator.trans(\"nodeloc-exchange.forum.list-empty\")}</div>\n          </div>\n        )}\n\n        {this.hasMoreResults() && (\n          <div style=\"text-align:center;padding:20px\">\n            <Button className={'Button Button--primary'} disabled={this.loading} loading={this.loading} onclick={() => this.loadMore()}>\n              {app.translator.trans('nodeloc-exchange.forum.money-list-load-more')}\n            </Button>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  loadMore() {\n    this.loading = true;\n    this.loadResults(this.userExchangeHistory.length);\n  }\n\n  parseResults(results) {\n    this.moreResults = !!results.payload.links && !!results.payload.links.next;\n    [].push.apply(this.userExchangeHistory, results);\n    this.loading = false;\n    m.redraw();\n\n    return results;\n  }\n\n  hasMoreResults() {\n    return this.moreResults;\n  }\n\n  loadResults(offset = 0) {\n    let url = '/users/' + this.user.id() + '/exchange';\n    return app.store\n      .find(url, {\n        filter: {\n          user: this.user.id(),\n        },\n        page: {\n          offset,\n        },\n      })\n      .catch(() => {})\n      .then(this.parseResults.bind(this));\n  }\n}\n","import UserPage from 'flarum/forum/components/UserPage';\nimport ExchangeHistoryList from \"./ExchangeHistoryList\";\n\nexport default class ExchangeHistoryPage extends UserPage {\n\n    oninit(vnode) {\n        super.oninit(vnode);\n\n        this.loadUser(m.route.param('username'));\n    }\n\n    content() {\n      return (\n        <div className=\"Post-body\">\n          {ExchangeHistoryList.component({\n              params: {\n                user: this.user,\n              },\n            })}\n          </div>\n      );\n    }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import Model from 'flarum/common/Model';\n\nexport default class UserExchangeHistory extends Model {}\nObject.assign(UserExchangeHistory.prototype, {\n  money : Model.attribute('money'),\n  type : Model.attribute('type'),\n  tx_hash : Model.attribute('tx_hash'),\n  created_at : Model.attribute('created_at'),\n})\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport UserPage from 'flarum/forum/components/UserPage';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport ExchangeHistoryPage from './components/ExchangeHistoryPage';\nimport userExchangeHistory from \"./models/UserExchangeHistory\";\n\napp.initializers.add('flarum-ext-exchange', () => {\n  app.store.models.userExchangeHistory = userExchangeHistory;\n\n  app.routes.userExchangeHistory = {\n    path: '/u/:username/exchange',\n    component: ExchangeHistoryPage,\n  };\n\n  extend(UserPage.prototype, 'navItems', function (items) {\n    if (app.session.user && app.forum.attribute('canExchange')===true) {\n      if (app.session.user.id() == this.user.id() || !app.session.user.attribute('canQueryExchange') ) {\n        items.add('userExchangeHistory', LinkButton.component({\n          href: app.route('userExchangeHistory', {\n            username: this.user.slug(),\n          }),\n          icon: 'fa-solid fa-recycle',\n        }, app.translator.trans('nodeloc-exchange.forum.nav')));\n      }\n    }\n\n  });\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_inheritsLoose","subClass","superClass","create","constructor","ExchangeListItem","_Component","apply","arguments","view","userExchangeHistory","this","attrs","created_at","money","type","tx_hash","m","style","href","target","Component","CreateExchange","_Modal","_this","exchange_rate","app","attribute","credits","Stream","loading","_proto","className","title","trans","onsubmit","e","_this2","preventDefault","method","url","body","then","result","error","show","Alert","hide","onhide","redraw","content","_this3","for","required","id","bidi","Button","onclick","Modal","WithDraw","withdraw_address","ExchangeList","oninit","vnode","moreResults","user","params","loadResults","LoadingIndicator","size","class","route","set","map","'['","component","length","hasMoreResults","disabled","loadMore","parseResults","results","payload","links","next","push","offset","find","filter","page","ExchangeHistoryPage","_UserPage","loadUser","param","ExchangeHistoryList","UserPage","UserExchangeHistory","_Model","Model","assign","add","models","path","extend","items","LinkButton","username","slug","icon"],"sourceRoot":""}