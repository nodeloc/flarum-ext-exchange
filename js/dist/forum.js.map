{"version":3,"file":"forum.js","mappings":"MACA,IAAIA,EAAsB,CCA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CAAM,ECLdF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDR,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,GCClFf,EAAyBM,IACH,oBAAXa,QAA0BA,OAAOC,aAC1CV,OAAOC,eAAeL,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DX,OAAOC,eAAeL,EAAS,aAAc,CAAEe,OAAO,GAAO,G,+BCL9D,MAAM,EAA+BC,OAAOC,KAAKC,OAAO,a,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,iBCAlD,EAA+BF,OAAOC,KAAKC,OAAO,6B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,gC,aCAzC,SAASC,EAAgBhB,EAAGiB,GAKzC,OAJAD,EAAkBf,OAAOiB,eAAiBjB,OAAOiB,eAAeC,OAAS,SAAyBnB,EAAGiB,GAEnG,OADAjB,EAAEoB,UAAYH,EACPjB,CACT,EACOgB,EAAgBhB,EAAGiB,EAC5B,CCLe,SAASI,EAAeC,EAAUC,GAC/CD,EAASf,UAAYN,OAAOuB,OAAOD,EAAWhB,WAC9Ce,EAASf,UAAUkB,YAAcH,EACjCJ,EAAeI,EAAUC,EAC3B,CCLA,MAAM,EAA+BV,OAAOC,KAAKC,OAAkB,U,aCAnE,MAAM,EAA+BF,OAAOC,KAAKC,OAAY,I,aCA7D,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,+B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,qB,aCAnBF,OAAOC,KAAKC,OAAO,mBCAnBF,OAAOC,KAAKC,OAAO,kBCAnBF,OAAOC,KAAKC,OAAO,oBCGT,IAE1BW,EAAgB,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAAC,MAAA,KAAAC,YAAA,KAkBlC,OAlBkCR,EAAAK,EAAAC,GAAAD,EAAAnB,UACnCuB,KAAA,WACE,IAAOC,EAAuBC,KAAKC,MAA5BF,oBACDG,EAAaH,EAAoBG,aACjCC,EAAQJ,EAAoBI,QAC5BC,EAAUL,EAAoBK,UAEpC,OACEC,EAAA,OAAKC,UAAU,4BACbD,EAAA,OAAKE,MAAM,qBACTF,EAAA,SAAIH,GAAe,MACnBG,EAAA,SAAIG,IAAIC,WAAWC,MAAM,2CAA2C,MACnEP,EAAM,MACPE,EAAA,SAAIG,IAAIC,WAAWC,MAAM,0CAA0C,MAClEN,GAIT,EAACV,CAAA,CAlBkC,CAASiB,KCL9C,MAAM,EAA+B9B,OAAOC,KAAKC,OAAO,2B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,uB,aCKnC6B,EAAc,SAAAC,GACjC,SAAAD,IAAc,IAAAE,EAGe,OAF3BA,EAAAD,EAAApC,KAAA,OAAO,MACFsC,cAAgBP,IAAAA,MAAUQ,UAAU,iBACzCF,EAAKV,QAAUa,IAAO,KAAKH,CAC7B,CALiCzB,EAAAuB,EAAAC,GAKhC,IAAAK,EAAAN,EAAArC,UAoEA,OApEA2C,EAEDZ,UAAA,WACE,MAAO,8BACT,EAACY,EAEDC,MAAA,WACE,OAAOX,IAAAA,WAAeE,MAAM,yCAC9B,EAACQ,EAEDE,SAAA,SAASC,GAAG,IAAAC,EAAA,KACVD,EAAEE,iBACFvB,KAAKwB,SAAU,EAEfhB,IAAAA,QAAY,CACViB,OAAQ,OACRC,IAAKlB,IAAAA,MAAUQ,UAAU,UAAY,YACrCW,KAAM,CACJvB,QAASJ,KAAKI,aAEfwB,MAAK,SAACC,GACPP,EAAKE,SAAU,EACXK,EAAOC,MACTtB,IAAAA,OAAWuB,KACT,CACEC,KAAM,SAERH,EAAOC,QAMXR,EAAKlB,QAAQ,KAEbkB,EAAKW,OACL5B,EAAE6B,SACJ,GACF,EAAChB,EAEDiB,QAAA,WAAU,IAAAC,EAAA,KACR,OACE/B,EAAA,OAAKC,UAAU,6BACbD,EAAA,OAAKC,UAAU,QACbD,EAAA,OAAKC,UAAU,cACbD,EAAA,SACEgC,IAAI,qBAAqB7B,IAAAA,WAAeE,MAAM,sCAChDL,EAAA,OACEC,UAAU,YAAYE,IAAAA,WAAeE,MAAM,uCAAwC,CAACK,cAAef,KAAKe,gBAAgB,KAC1HV,EAAA,SACEiC,UAAQ,EACRC,GAAG,oBACHjC,UAAU,cACV0B,KAAK,SACLQ,KAAMxC,KAAKI,WAGfC,EAACoC,IAAM,CACLnC,UAAU,yBACV0B,KAAK,SACLR,QAASxB,KAAKwB,QACdkB,QAAS,SAACrB,GAAC,OAAKe,EAAKhB,SAASC,EAAE,GACjC,OAMT,EAACT,CAAA,CAzEgC,CAAS+B,KCEvBC,EAAY,SAAAjD,GAAA,SAAAiD,IAAA,OAAAjD,EAAAC,MAAA,KAAAC,YAAA,KAAAR,EAAAuD,EAAAjD,GAAA,IAAAuB,EAAA0B,EAAArE,UAyF9B,OAzF8B2C,EAC/B2B,OAAA,SAAOC,GACLnD,EAAApB,UAAMsE,OAAMpE,KAAC,KAAAqE,GACb9C,KAAKwB,SAAU,EACfxB,KAAK+C,aAAc,EACnB/C,KAAKD,oBAAsB,GAC3BC,KAAKgD,KAAOhD,KAAKC,MAAMgD,OAAOD,KAC9BhD,KAAKkD,aACP,EAAChC,EAEDpB,KAAA,WAAO,IAAAgB,EAAA,KAOL,OAJId,KAAKwB,SACG2B,IAAAA,UAA2B,CAAEC,KAAM,UAI7C/C,EAAA,WACEA,EAAA,OAAKE,MAAM,2DACRC,IAAAA,WAAeE,MAAM,iCAGxBL,EAACoC,IAAM,CACLY,MAAM,yBACNX,QAAS,WACPlC,IAAAA,MAAUuB,KAAKnB,EACjB,GAECJ,IAAAA,WAAeE,MAAM,2CAExBL,EAAA,MAAIE,MAAM,kEACPP,KAAKD,oBAAoBuD,KAAI,SAACvD,GAC7B,OACEM,EAAA,MAAIE,MAAM,kBAAkBxC,IAAKgC,EAAoBwC,GAAI,UAASxC,EAAoBwC,IACnF7C,EAAiB6D,UAAU,CAAExD,oBAAAA,IAGpC,MAGAC,KAAKwB,SAA6C,IAAlCxB,KAAKD,oBAAoByD,QACzCnD,EAAA,WACEA,EAAA,OAAKE,MAAM,uGAAuGC,IAAAA,WAAeE,MAAM,uCAI1IV,KAAKyD,kBACJpD,EAAA,OAAKE,MAAM,kCACTF,EAACoC,IAAM,CAACnC,UAAW,yBAA0BoD,SAAU1D,KAAKwB,QAASA,QAASxB,KAAKwB,QAASkB,QAAS,kBAAM5B,EAAK6C,UAAU,GACvHnD,IAAAA,WAAeE,MAAM,iDAMlC,EAACQ,EAEDyC,SAAA,WACE3D,KAAKwB,SAAU,EACfxB,KAAKkD,YAAYlD,KAAKD,oBAAoByD,OAC5C,EAACtC,EAED0C,aAAA,SAAaC,GAMX,OALA7D,KAAK+C,cAAgBc,EAAQC,QAAQC,SAAWF,EAAQC,QAAQC,MAAMC,KACtE,GAAGC,KAAKrE,MAAMI,KAAKD,oBAAqB8D,GACxC7D,KAAKwB,SAAU,EACfnB,EAAE6B,SAEK2B,CACT,EAAC3C,EAEDuC,eAAA,WACE,OAAOzD,KAAK+C,WACd,EAAC7B,EAEDgC,YAAA,SAAYgB,QAAM,IAANA,IAAAA,EAAS,GACnB,IAAIxC,EAAM,UAAY1B,KAAKgD,KAAKT,KAAO,YACvC,OAAO/B,IAAAA,MACJ2D,KAAKzC,EAAK,CACT0C,OAAQ,CACNpB,KAAMhD,KAAKgD,KAAKT,MAElB8B,KAAM,CACJH,OAAAA,KAEF,OACK,WAAO,IACbtC,KAAK5B,KAAK4D,aAAazE,KAAKa,MACjC,EAAC4C,CAAA,CAzF8B,CAASjC,KCJrB2D,EAAmB,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAA3E,MAAA,KAAAC,YAAA,KAAAR,EAAAiF,EAAAC,GAAA,IAAArD,EAAAoD,EAAA/F,UAkBnC,OAlBmC2C,EAEpC2B,OAAA,SAAOC,GACHyB,EAAAhG,UAAMsE,OAAMpE,KAAC,KAAAqE,GAEb9C,KAAKwE,SAASnE,EAAEoE,MAAMC,MAAM,YAChC,EAACxD,EAEDiB,QAAA,WACE,OACE9B,EAAA,OAAKC,UAAU,aACZqE,EAAoBpB,UAAU,CAC3BN,OAAQ,CACND,KAAMhD,KAAKgD,QAKvB,EAACsB,CAAA,CAlBmC,CAASM,KCHjD,MAAM,EAA+B/F,OAAOC,KAAKC,OAAO,gB,aCEnC8F,EAAmB,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAAlF,MAAA,KAAAC,YAAA,YAAAR,EAAAwF,EAAAC,GAAAD,CAAA,EAASE,KACjD9G,OAAO+G,OAAOH,EAAoBtG,UAAW,CAC3C4B,MAAQ4E,IAAAA,UAAgB,SACxB3E,QAAU2E,IAAAA,UAAgB,WAC1B7E,WAAa6E,IAAAA,UAAgB,gBCC/BvE,IAAAA,aAAiByE,IAAI,uBAAuB,WAC1CzE,IAAAA,MAAU0E,OAAOnF,oBAAsBA,EAEvCS,IAAAA,OAAWT,oBAAsB,CAC/BoF,KAAM,wBACN5B,UAAWe,IAGbc,EAAAA,EAAAA,QAAOR,IAAAA,UAAoB,YAAY,SAAUS,GAC3C7E,IAAAA,QAAYwC,OACVxC,IAAAA,QAAYwC,KAAKT,MAAQvC,KAAKgD,KAAKT,MAAS/B,IAAAA,QAAYwC,KAAKhC,UAAU,qBACzEqE,EAAMJ,IAAI,sBAAuBK,IAAAA,UAAqB,CACpDC,KAAM/E,IAAAA,MAAU,sBAAuB,CACrCgF,SAAUxF,KAAKgD,KAAKyC,SAEtBC,KAAM,uBACLlF,IAAAA,WAAeE,MAAM,gCAI9B,GACF,G","sources":["webpack://@nodeloc/flarum-ext-exchange/webpack/bootstrap","webpack://@nodeloc/flarum-ext-exchange/webpack/runtime/compat get default export","webpack://@nodeloc/flarum-ext-exchange/webpack/runtime/define property getters","webpack://@nodeloc/flarum-ext-exchange/webpack/runtime/hasOwnProperty shorthand","webpack://@nodeloc/flarum-ext-exchange/webpack/runtime/make namespace object","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['forum/app']\"","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['common/extend']\"","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['forum/components/UserPage']\"","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@nodeloc/flarum-ext-exchange/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@nodeloc/flarum-ext-exchange/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['Component']\"","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['app']\"","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['components/Button']\"","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['components/Link']\"","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['helpers/avatar']\"","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['helpers/username']\"","webpack://@nodeloc/flarum-ext-exchange/./src/forum/components/ExchangeHistoryListItem.js","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['common/components/Button']\"","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@nodeloc/flarum-ext-exchange/./src/forum/components/CreateExchange.js","webpack://@nodeloc/flarum-ext-exchange/./src/forum/components/ExchangeHistoryList.js","webpack://@nodeloc/flarum-ext-exchange/./src/forum/components/ExchangeHistoryPage.js","webpack://@nodeloc/flarum-ext-exchange/external root \"flarum.core.compat['common/Model']\"","webpack://@nodeloc/flarum-ext-exchange/./src/forum/models/UserExchangeHistory.js","webpack://@nodeloc/flarum-ext-exchange/./src/forum/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UserPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['helpers/avatar'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['helpers/username'];","import Component from \"flarum/Component\";\nimport Link from \"flarum/components/Link\";\nimport avatar from \"flarum/helpers/avatar\";\nimport username from \"flarum/helpers/username\";\n\nexport default class ExchangeListItem extends Component {\n  view() {\n    const {userExchangeHistory} = this.attrs;\n    const created_at = userExchangeHistory.created_at();\n    const money = userExchangeHistory.money();\n    const credits = userExchangeHistory.credits();\n\n    return (\n      <div className=\"transferHistoryContainer\">\n        <div style=\"padding-top: 5px;\">\n          <b>{created_at}</b>&nbsp;|&nbsp;\n          <b>{app.translator.trans('nodeloc-exchange.forum.record.money-out')}: </b>\n          {money}&nbsp;|&nbsp;\n          <b>{app.translator.trans('nodeloc-exchange.forum.record.money-in')}: </b>\n          {credits}\n        </div>\n      </div>\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","import app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport Stream from 'flarum/common/utils/Stream';\n\nexport default class CreateExchange extends Modal {\n  constructor() {\n    super();\n    this.exchange_rate = app.forum.attribute('exchange_rate');\n    this.credits = Stream('0');\n  }\n\n  className() {\n    return 'create-exchange Modal--small';\n  }\n\n  title() {\n    return app.translator.trans('nodeloc-exchange.forum.create_exchange');\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n    this.loading = true;\n\n    app.request({\n      method: 'POST',\n      url: app.forum.attribute('apiUrl') + '/exchange',\n      body: {\n        credits: this.credits(),\n      },\n    }).then((result) => {\n      this.loading = false;\n      if (result.error) {\n        app.alerts.show(\n          {\n            type: 'error',\n          },\n          result.error\n        );\n        return;\n      }\n\n      // Clear email and message\n      this.credits('0');\n      // Close the purchase box\n      this.hide();\n      m.redraw();\n    });\n  }\n\n  content() {\n    return (\n      <div className=\"container buy-store-layer\">\n        <div className=\"Form\">\n          <div className=\"Form-group\">\n            <label\n              for=\"buy-store-to-mail\">{app.translator.trans('nodeloc-exchange.forum.input_help')}</label>\n            <div\n              className=\"helpText\">{app.translator.trans('nodeloc-exchange.forum.exchange_rate', {exchange_rate: this.exchange_rate})} </div>\n            <input\n              required\n              id=\"buy-store-to-mail\"\n              className=\"FormControl\"\n              type=\"number\"\n              bidi={this.credits}\n            />\n          </div>\n          <Button\n            className=\"Button Button--primary\"\n            type=\"submit\"\n            loading={this.loading}\n            onclick={(e) => this.onsubmit(e)}\n          >\n            转换\n          </Button>\n        </div>\n      </div>\n    );\n  }\n}\n","import Component from \"flarum/Component\";\nimport app from \"flarum/app\";\nimport LoadingIndicator from \"flarum/components/LoadingIndicator\";\nimport Button from \"flarum/components/Button\";\n\nimport ExchangeListItem from \"./ExchangeHistoryListItem\";\nimport CreateExchange from \"./CreateExchange\"\nexport default class ExchangeList extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.loading = true;\n    this.moreResults = false;\n    this.userExchangeHistory = [];\n    this.user = this.attrs.params.user;\n    this.loadResults();\n  }\n\n  view() {\n    let loading;\n\n    if (this.loading) {\n      loading = LoadingIndicator.component({ size: \"large\" });\n    }\n\n    return (\n      <div>\n        <div style=\"padding-bottom:10px; font-size: 24px;font-weight: bold;\">\n          {app.translator.trans(\"nodeloc-exchange.forum.title\")}\n\n        </div>\n        <Button\n          class=\"Button Button--primary\"\n          onclick={() => {\n            app.modal.show(CreateExchange);\n          }}\n        >\n          {app.translator.trans('nodeloc-exchange.forum.create_exchange')}\n        </Button>\n        <ul style=\"margin: 0;padding: 0;list-style-type: none;position: relative;\">\n          {this.userExchangeHistory.map((userExchangeHistory) => {\n            return (\n              <li style=\"padding-top:5px\" key={userExchangeHistory.id} data-id={userExchangeHistory.id}>\n                {ExchangeListItem.component({ userExchangeHistory })}\n              </li>\n            );\n          })}\n        </ul>\n\n        {!this.loading && this.userExchangeHistory.length===0 && (\n          <div>\n            <div style=\"font-size:1.4em;color: var(--muted-more-color);text-align: center;height: 300px;line-height: 100px;\">{app.translator.trans(\"nodeloc-exchange.forum.list-empty\")}</div>\n          </div>\n        )}\n\n        {this.hasMoreResults() && (\n          <div style=\"text-align:center;padding:20px\">\n            <Button className={'Button Button--primary'} disabled={this.loading} loading={this.loading} onclick={() => this.loadMore()}>\n              {app.translator.trans('nodeloc-exchange.forum.money-list-load-more')}\n            </Button>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  loadMore() {\n    this.loading = true;\n    this.loadResults(this.userExchangeHistory.length);\n  }\n\n  parseResults(results) {\n    this.moreResults = !!results.payload.links && !!results.payload.links.next;\n    [].push.apply(this.userExchangeHistory, results);\n    this.loading = false;\n    m.redraw();\n\n    return results;\n  }\n\n  hasMoreResults() {\n    return this.moreResults;\n  }\n\n  loadResults(offset = 0) {\n    let url = '/users/' + this.user.id() + '/exchange';\n    return app.store\n      .find(url, {\n        filter: {\n          user: this.user.id(),\n        },\n        page: {\n          offset,\n        },\n      })\n      .catch(() => {})\n      .then(this.parseResults.bind(this));\n  }\n}\n","import UserPage from 'flarum/forum/components/UserPage';\nimport ExchangeHistoryList from \"./ExchangeHistoryList\";\n\nexport default class ExchangeHistoryPage extends UserPage {\n\n    oninit(vnode) {\n        super.oninit(vnode);\n\n        this.loadUser(m.route.param('username'));\n    }\n\n    content() {\n      return (\n        <div className=\"Post-body\">\n          {ExchangeHistoryList.component({\n              params: {\n                user: this.user,\n              },\n            })}\n          </div>\n      );\n    }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import Model from 'flarum/common/Model';\n\nexport default class UserExchangeHistory extends Model {}\nObject.assign(UserExchangeHistory.prototype, {\n  money : Model.attribute('money'),\n  credits : Model.attribute('credits'),\n  created_at : Model.attribute('created_at'),\n})\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport UserPage from 'flarum/forum/components/UserPage';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport ExchangeHistoryPage from './components/ExchangeHistoryPage';\nimport userExchangeHistory from \"./models/UserExchangeHistory\";\n\napp.initializers.add('flarum-ext-exchange', () => {\n  app.store.models.userExchangeHistory = userExchangeHistory;\n\n  app.routes.userExchangeHistory = {\n    path: '/u/:username/exchange',\n    component: ExchangeHistoryPage,\n  };\n\n  extend(UserPage.prototype, 'navItems', function (items) {\n    if (app.session.user) {\n      if (app.session.user.id() == this.user.id() || !app.session.user.attribute('canQueryExchange') ) {\n        items.add('userExchangeHistory', LinkButton.component({\n          href: app.route('userExchangeHistory', {\n            username: this.user.slug(),\n          }),\n          icon: 'fa-solid fa-recycle',\n        }, app.translator.trans('nodeloc-exchange.forum.nav')));\n      }\n    }\n\n  });\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_inheritsLoose","subClass","superClass","create","constructor","ExchangeListItem","_Component","apply","arguments","view","userExchangeHistory","this","attrs","created_at","money","credits","m","className","style","app","translator","trans","Component","CreateExchange","_Modal","_this","exchange_rate","attribute","Stream","_proto","title","onsubmit","e","_this2","preventDefault","loading","method","url","body","then","result","error","show","type","hide","redraw","content","_this3","for","required","id","bidi","Button","onclick","Modal","ExchangeList","oninit","vnode","moreResults","user","params","loadResults","LoadingIndicator","size","class","map","component","length","hasMoreResults","disabled","loadMore","parseResults","results","payload","links","next","push","offset","find","filter","page","ExchangeHistoryPage","_UserPage","loadUser","route","param","ExchangeHistoryList","UserPage","UserExchangeHistory","_Model","Model","assign","add","models","path","extend","items","LinkButton","href","username","slug","icon"],"sourceRoot":""}